"use strict";(self.webpackChunkfreshcart=self.webpackChunkfreshcart||[]).push([[639],{1731:(_,u,i)=>{i.d(u,{J:()=>m});var c=i(5619);const e_baseUrlData="https://ecommerce.routemisr.com/api/v1";var t=i(9468),g=i(9862),h=i(2425);let m=(()=>{class l{constructor(n,o){this._HttpClient=n,this._ToastrService=o,this.cartNumber=new c.X(0),this.whishNumber=new c.X(0),this.whishList=new c.X([])}getUserOrders(n){return this._HttpClient.get(e_baseUrlData+"/orders/user/"+n)}addToCart(n){this.sendToCart(n).subscribe({next:o=>{"success"===o.status&&(this._ToastrService.success(o.message),this.cartNumber.next(o.numOfCartItems))}})}SetcheckOut(n,o){return this._HttpClient.post(e_baseUrlData+`/orders/checkout-session/${n}?url=https://ahmed-menisy.github.io/FreshCart`,o)}getProducts(n=1){return this._HttpClient.get(e_baseUrlData+`/products?page=${n}`)}getProductById(n){return this._HttpClient.get(e_baseUrlData+"/products/"+n)}getCategories(){return this._HttpClient.get(e_baseUrlData+"/categories")}getCategoriesById(n){return this._HttpClient.get(e_baseUrlData+"/categories/"+n)}getSubCategoriesToCat(n){return this._HttpClient.get(e_baseUrlData+`/categories/${n}/subcategories`)}sendToCart(n){return this._HttpClient.post(e_baseUrlData+"/cart",{productId:n})}getCartData(){return this._HttpClient.get(e_baseUrlData+"/cart")}clearCart(){return this._HttpClient.delete(e_baseUrlData+"/cart")}updatePoductCount(n,o){return this._HttpClient.put(e_baseUrlData+"/cart/"+n,{count:o})}deletePoductCart(n){return this._HttpClient.delete(e_baseUrlData+"/cart/"+n)}getBrands(n=1){return this._HttpClient.get(e_baseUrlData+`/brands?page=${n}`)}getBrandData(n){return this._HttpClient.get(e_baseUrlData+`/brands/${n}`)}setWishlist(n){return this._HttpClient.post(e_baseUrlData+"/wishlist",{productId:n})}removeWishlist(n){return this._HttpClient.delete(e_baseUrlData+`/wishlist/${n}`)}getWishlist(){return this._HttpClient.get(e_baseUrlData+"/wishlist")}setAddresses(n){return this._HttpClient.post(e_baseUrlData+"/addresses",n)}getAddresses(){return this._HttpClient.get(e_baseUrlData+"/addresses")}removeAddresses(n){return this._HttpClient.delete(e_baseUrlData+`/addresses/${n}`)}static#t=this.\u0275fac=function(o){return new(o||l)(t.LFG(g.eN),t.LFG(h._W))};static#e=this.\u0275prov=t.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"})}return l})()},6019:(_,u,i)=>{i.r(u),i.d(u,{ShopingaddressComponent:()=>v});var c=i(6814),e=i(95),t=i(9468),g=i(1731),h=i(2956);function m(r,p){1&r&&(t.TgZ(0,"p",15),t._uU(1," Details Is Required "),t.qZA())}function l(r,p){1&r&&(t.TgZ(0,"p",15),t._uU(1," Details MinLength is 2 "),t.qZA())}function f(r,p){if(1&r&&(t.ynx(0),t.YNc(1,m,2,0,"p",14),t.YNc(2,l,2,0,"p",14),t.BQk()),2&r){const s=t.oxw();t.xp6(1),t.Q6J("ngIf",s.f.details.getError("required")),t.xp6(1),t.Q6J("ngIf",s.f.details.getError("minlength"))}}function n(r,p){1&r&&(t.TgZ(0,"p",15),t._uU(1," phone Is Required "),t.qZA())}function o(r,p){1&r&&(t.TgZ(0,"p",15),t._uU(1," accept only egypt phone numbers "),t.qZA())}function b(r,p){if(1&r&&(t.ynx(0),t.YNc(1,n,2,0,"p",14),t.YNc(2,o,2,0,"p",14),t.BQk()),2&r){const s=t.oxw();t.xp6(1),t.Q6J("ngIf",s.f.phone.getError("required")),t.xp6(1),t.Q6J("ngIf",s.f.phone.getError("pattern"))}}function C(r,p){1&r&&(t.TgZ(0,"p",15),t._uU(1," city Is Required "),t.qZA())}function U(r,p){1&r&&(t.TgZ(0,"p",15),t._uU(1," City MinLength is 2 "),t.qZA())}function x(r,p){if(1&r&&(t.ynx(0),t.YNc(1,C,2,0,"p",14),t.YNc(2,U,2,0,"p",14),t.BQk()),2&r){const s=t.oxw();t.xp6(1),t.Q6J("ngIf",s.f.city.getError("required")),t.xp6(1),t.Q6J("ngIf",s.f.city.getError("minlength"))}}function I(r,p){if(1&r&&(t.TgZ(0,"button",16)(1,"span"),t._uU(2,"Next"),t.qZA()()),2&r){const s=t.oxw();t.Q6J("disabled",s.shopForm.invalid)}}function T(r,p){1&r&&(t.TgZ(0,"button",17)(1,"span"),t._UZ(2,"i",18),t.qZA()())}function D(r,p){if(1&r&&(t.TgZ(0,"p",19),t._uU(1),t.qZA()),2&r){const s=t.oxw();t.xp6(1),t.hij(" ",s.errMsg," ")}}let v=(()=>{class r{constructor(s,d,a){this._fb=s,this._EcomdataService=d,this._ActivatedRoute=a,this.isLoading=!1,this.errMsg="",this.userId=""}ngOnInit(){this.shopForm=this._fb.group({details:["",[e.kI.required,e.kI.minLength(2)]],phone:["",[e.kI.required,e.kI.pattern(/^01[0125][0-9]{8}$/)]],city:["",[e.kI.required,e.kI.minLength(2)]]}),this._ActivatedRoute.queryParamMap.subscribe({next:s=>{this.userId=s.get("userid")}})}get f(){return this.shopForm.controls}handleForm(){this.isLoading=!0,this.shopForm.valid&&this._EcomdataService.SetcheckOut(this.userId,this.shopForm.value).subscribe({next:s=>{"success"===s.status&&(this.isLoading=!1,window.open(s.session.url,"_blank"),console.log(s))},error:s=>{console.log(s),this.errMsg=s?.error?.message,this.isLoading=!1}})}static#t=this.\u0275fac=function(d){return new(d||r)(t.Y36(e.qu),t.Y36(g.J),t.Y36(h.gz))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-shopingaddress"]],standalone:!0,features:[t.jDz],decls:22,vars:7,consts:[[1,"w-50","mx-auto","shadow","rounded","bg-main-light","p-3"],[1,"text-center"],[1,"vstack","gap-3",3,"formGroup","ngSubmit"],[1,"form-item"],["for","details"],["id","details","formControlName","details","placeholder","Your Details...",1,"form-control"],[4,"ngIf"],["for","phone"],["id","phone","type","tel","formControlName","phone","placeholder","Your Phone...",1,"form-control"],["for","city"],["id","city","type","text","formControlName","city","placeholder","Your City...",1,"form-control"],["type","submit","class","main-btn",3,"disabled",4,"ngIf"],["type","button","disabled","","class","main-btn ms-auto",4,"ngIf"],["class","alert alert-danger text-center w-50 mx-auto mb-0 p-1 mt-3",4,"ngIf"],["class","alert alert-danger w-50 mx-auto p-1 mb-0",4,"ngIf"],[1,"alert","alert-danger","w-50","mx-auto","p-1","mb-0"],["type","submit",1,"main-btn",3,"disabled"],["type","button","disabled","",1,"main-btn","ms-auto"],[1,"fas","fa-spinner","fa-spin"],[1,"alert","alert-danger","text-center","w-50","mx-auto","mb-0","p-1","mt-3"]],template:function(d,a){1&d&&(t.TgZ(0,"section",0)(1,"h1",1),t._uU(2,"shipping Address"),t.qZA(),t.TgZ(3,"form",2),t.NdJ("ngSubmit",function(){return a.handleForm()}),t.TgZ(4,"div",3)(5,"label",4),t._uU(6,"Details:"),t.qZA(),t._UZ(7,"textarea",5),t.YNc(8,f,3,2,"ng-container",6),t.qZA(),t.TgZ(9,"div",3)(10,"label",7),t._uU(11,"Phone:"),t.qZA(),t._UZ(12,"input",8),t.YNc(13,b,3,2,"ng-container",6),t.qZA(),t.TgZ(14,"div",3)(15,"label",9),t._uU(16,"City:"),t.qZA(),t._UZ(17,"input",10),t.YNc(18,x,3,2,"ng-container",6),t.qZA(),t.YNc(19,I,3,1,"button",11),t.YNc(20,T,3,0,"button",12),t.YNc(21,D,2,1,"p",13),t.qZA()()),2&d&&(t.xp6(3),t.Q6J("formGroup",a.shopForm),t.xp6(5),t.Q6J("ngIf",a.f.details.errors&&(a.f.details.value.length||a.f.details.touched)),t.xp6(5),t.Q6J("ngIf",a.f.phone.errors&&(a.f.phone.value.length||a.f.phone.touched)),t.xp6(5),t.Q6J("ngIf",a.f.city.errors&&(a.f.city.value.length||a.f.city.touched)),t.xp6(1),t.Q6J("ngIf",!a.isLoading),t.xp6(1),t.Q6J("ngIf",a.isLoading),t.xp6(1),t.Q6J("ngIf",a.errMsg))},dependencies:[c.ez,c.O5,e.UX,e._Y,e.Fj,e.JJ,e.JL,e.sg,e.u]})}return r})()}}]);