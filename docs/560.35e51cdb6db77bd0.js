"use strict";(self.webpackChunkfreshcart=self.webpackChunkfreshcart||[]).push([[560],{4768:(T,u,i)=>{i.d(u,{e:()=>C});var m=i(6726),s=i(5619);const e_baseUrlAuth="https://ecommerce.routemisr.com/api/v1/auth";var _=i(9468),w=i(9862),Z=i(2956);let C=(()=>{class g{constructor(o,l){this._HttpClient=o,this._Router=l,this.userData=new s.X(null),this.saveUser()}saveUser(){const o=localStorage.getItem("_token");if(o)try{const l=(0,m.Z)(o);l.name&&this.userData.next(l)}catch(l){l.message.includes("Invalid token")&&(localStorage.removeItem("_token"),this._Router.navigate(["/login"]))}}setRegister(o){return this._HttpClient.post(e_baseUrlAuth+"/signup",o)}setLogin(o){return this._HttpClient.post(e_baseUrlAuth+"/signin",o)}setForgotPassword(o){return this._HttpClient.post(e_baseUrlAuth+"/forgotPasswords",o)}setVerifyResetCode(o){return this._HttpClient.post(e_baseUrlAuth+"/verifyResetCode",o)}resetPassword(o){return this._HttpClient.put(e_baseUrlAuth+"/resetPassword",o)}setChangePassword(o){return this._HttpClient.put("https://ecommerce.routemisr.com/api/v1/users/changeMyPassword",o)}static#e=this.\u0275fac=function(l){return new(l||g)(_.LFG(w.eN),_.LFG(Z.F0))};static#t=this.\u0275prov=_.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"})}return g})()},6560:(T,u,i)=>{i.r(u),i.d(u,{RegisterComponent:()=>Y});var m=i(6814),s=i(95),e=i(9468),_=i(4768),w=i(2956);function Z(t,a){1&t&&(e.TgZ(0,"p",28),e._uU(1," Name Is Required "),e.qZA())}function C(t,a){1&t&&(e.TgZ(0,"p",28),e._uU(1," Name MinLength is 3 "),e.qZA())}function g(t,a){1&t&&(e.TgZ(0,"p",28),e._uU(1," Name MaxLength is 20 "),e.qZA())}function R(t,a){if(1&t&&(e.ynx(0),e.YNc(1,Z,2,0,"p",27),e.YNc(2,C,2,0,"p",27),e.YNc(3,g,2,0,"p",27),e.BQk()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.f.name.getError("required")),e.xp6(1),e.Q6J("ngIf",n.f.name.getError("minlength")),e.xp6(1),e.Q6J("ngIf",n.f.name.getError("maxlength"))}}function o(t,a){1&t&&(e.TgZ(0,"p",28),e._uU(1," Email Is Required "),e.qZA())}function l(t,a){1&t&&(e.TgZ(0,"p",28),e._uU(1," Email Invalid Format "),e.qZA())}function v(t,a){if(1&t&&(e.ynx(0),e.YNc(1,o,2,0,"p",27),e.YNc(2,l,2,0,"p",27),e.BQk()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.f.email.getError("required")),e.xp6(1),e.Q6J("ngIf",n.f.email.getError("email"))}}function x(t,a){1&t&&(e.TgZ(0,"p",28),e._uU(1," Password Is Required "),e.qZA())}function U(t,a){1&t&&(e.TgZ(0,"p",28),e._uU(1," Must be at least 6 chars "),e.qZA())}function I(t,a){if(1&t&&(e.ynx(0),e.YNc(1,x,2,0,"p",27),e.YNc(2,U,2,0,"p",27),e.BQk()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.f.password.getError("required")),e.xp6(1),e.Q6J("ngIf",n.f.password.getError("pattern"))}}function A(t,a){1&t&&(e.TgZ(0,"p",28),e._uU(1," RePassword Is Required "),e.qZA())}function P(t,a){1&t&&(e.TgZ(0,"p",28),e._uU(1," RePassword confirmation is incorrect "),e.qZA())}function b(t,a){if(1&t&&(e.ynx(0),e.YNc(1,A,2,0,"p",27),e.YNc(2,P,2,0,"p",27),e.BQk()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.f.rePassword.getError("required")),e.xp6(1),e.Q6J("ngIf",n.f.rePassword.getError("mismatch"))}}function q(t,a){1&t&&(e.TgZ(0,"p",28),e._uU(1," phone Is Required "),e.qZA())}function y(t,a){1&t&&(e.TgZ(0,"p",28),e._uU(1," accept only egypt phone numbers "),e.qZA())}function N(t,a){if(1&t&&(e.ynx(0),e.YNc(1,q,2,0,"p",27),e.YNc(2,y,2,0,"p",27),e.BQk()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.f.phone.getError("required")),e.xp6(1),e.Q6J("ngIf",n.f.phone.getError("pattern"))}}function E(t,a){if(1&t&&(e.TgZ(0,"button",29)(1,"span"),e._uU(2,"Register"),e.qZA()()),2&t){const n=e.oxw();e.Q6J("disabled",n.registerForm.invalid)}}function J(t,a){1&t&&(e.TgZ(0,"button",30)(1,"span"),e._UZ(2,"i",31),e.qZA()())}function Q(t,a){if(1&t&&(e.TgZ(0,"p",32),e._uU(1),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.hij(" ",n.errMsg," ")}}const f=function(t){return{"d-none":t}};let Y=(()=>{class t{constructor(n,c,r){this._AuthService=n,this._fb=c,this._Router=r,this.passwordShow=!1,this.rePasswordShow=!1,this.errMsg="",this.isLoading=!1}ngOnInit(){this.registerForm=this._fb.group({name:["",[s.kI.required,s.kI.minLength(3),s.kI.maxLength(20)]],email:["",[s.kI.required,s.kI.email]],password:["",[s.kI.required,s.kI.pattern(/^\w{6,}$/)]],rePassword:[""],phone:["",[s.kI.required,s.kI.pattern(/^01[0125][0-9]{8}$/)]]},{validator:[this.checkPassword]})}checkPassword(n){const c=n.get("password"),r=n.get("rePassword");""===r?.value?r?.setErrors({required:!0}):r?.value!==c?.value&&r?.setErrors({mismatch:!0})}get f(){return this.registerForm.controls}onRegister(){this.isLoading=!0,this.registerForm.valid&&this._AuthService.setRegister(this.registerForm.value).subscribe({next:n=>{"success"===n.message&&(this.isLoading=!1,this._Router.navigate(["/login"]))},error:n=>{this.isLoading=!1,this.errMsg=n.error.message}})}static#e=this.\u0275fac=function(c){return new(c||t)(e.Y36(_.e),e.Y36(s.qu),e.Y36(w.F0))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-register"]],standalone:!0,features:[e.jDz],decls:46,vars:21,consts:[[1,"row","d-flex","align-items-center","justify-content-center"],[1,"col-4"],["src","../../../assets/images/bg3.jpeg","alt","",1,"img-fluid"],[1,"col-8"],[1,"bg-main-light","rounded","shadow","p-3"],[1,"display-3","text-center"],[1,"vstack","gap-3","w-75","mx-auto",3,"formGroup","ngSubmit"],[1,"form-item"],["for","name"],["formControlName","name","id","name","type","text","placeholder","Your Name....",1,"form-control"],[4,"ngIf"],["for","email"],["formControlName","email","id","email","type","email","placeholder","Your Email....",1,"form-control"],[1,"position-relative"],["formControlName","password","id","password","type","password","placeholder","Your Password....",1,"form-control"],["pass",""],["role","button",1,"position-absolute","top-50","end-0","translate-middle-y","me-2",3,"ngClass","click"],[1,"fas","fa-eye"],[1,"fas","fa-eye-slash"],["for","rePassword"],["formControlName","rePassword","id","rePassword","type","Password","placeholder","Confirm Password....",1,"form-control"],["repass",""],["for","phone"],["formControlName","phone","id","phone","type","tel","placeholder","Your Phone....",1,"form-control"],["type","submit","class","main-btn ms-auto",3,"disabled",4,"ngIf"],["type","button","disabled","","class","main-btn ms-auto",4,"ngIf"],["class","alert alert-danger text-center w-50 mx-auto mb-0 p-1 mt-3",4,"ngIf"],["class","alert alert-danger w-50 mx-auto p-1 mb-0",4,"ngIf"],[1,"alert","alert-danger","w-50","mx-auto","p-1","mb-0"],["type","submit",1,"main-btn","ms-auto",3,"disabled"],["type","button","disabled","",1,"main-btn","ms-auto"],[1,"fas","fa-spinner","fa-spin"],[1,"alert","alert-danger","text-center","w-50","mx-auto","mb-0","p-1","mt-3"]],template:function(c,r){if(1&c){const d=e.EpF();e.TgZ(0,"section",0)(1,"section",1),e._UZ(2,"img",2),e.qZA(),e.TgZ(3,"section",3)(4,"section",4)(5,"h1",5),e._uU(6,"Register Now"),e.qZA(),e.TgZ(7,"form",6),e.NdJ("ngSubmit",function(){return r.onRegister()}),e.TgZ(8,"div",7)(9,"label",8),e._uU(10,"Name:"),e.qZA(),e._UZ(11,"input",9),e.YNc(12,R,4,3,"ng-container",10),e.qZA(),e.TgZ(13,"div",7)(14,"label",11),e._uU(15,"Email:"),e.qZA(),e._UZ(16,"input",12),e.YNc(17,v,3,2,"ng-container",10),e.qZA(),e.TgZ(18,"div",7)(19,"div",13),e._UZ(20,"input",14,15),e.TgZ(22,"span",16),e.NdJ("click",function(){e.CHM(d);const p=e.MAs(21);return r.passwordShow=!0,e.KtG(p.type=1==r.passwordShow?"text":"password")}),e._UZ(23,"i",17),e.qZA(),e.TgZ(24,"span",16),e.NdJ("click",function(){e.CHM(d);const p=e.MAs(21);return r.passwordShow=!1,e.KtG(p.type=0==r.passwordShow?"password":"text")}),e._UZ(25,"i",18),e.qZA()(),e.YNc(26,I,3,2,"ng-container",10),e.qZA(),e.TgZ(27,"div",7)(28,"label",19),e._uU(29,"RePassword:"),e.qZA(),e.TgZ(30,"div",13),e._UZ(31,"input",20,21),e.TgZ(33,"span",16),e.NdJ("click",function(){e.CHM(d);const p=e.MAs(32);return r.rePasswordShow=!0,e.KtG(p.type=1==r.rePasswordShow?"text":"password")}),e._UZ(34,"i",17),e.qZA(),e.TgZ(35,"span",16),e.NdJ("click",function(){e.CHM(d);const p=e.MAs(32);return r.rePasswordShow=!1,e.KtG(p.type=0==r.rePasswordShow?"password":"text")}),e._UZ(36,"i",18),e.qZA()(),e.YNc(37,b,3,2,"ng-container",10),e.qZA(),e.TgZ(38,"div",7)(39,"label",22),e._uU(40,"phone:"),e.qZA(),e._UZ(41,"input",23),e.YNc(42,N,3,2,"ng-container",10),e.qZA(),e.YNc(43,E,3,1,"button",24),e.YNc(44,J,3,0,"button",25),e.YNc(45,Q,2,1,"p",26),e.qZA()()()()}2&c&&(e.xp6(7),e.Q6J("formGroup",r.registerForm),e.xp6(5),e.Q6J("ngIf",r.f.name.errors&&(r.f.name.value.length||r.f.name.touched)),e.xp6(5),e.Q6J("ngIf",r.f.email.errors&&(r.f.email.value.length||r.f.email.touched)),e.xp6(5),e.Q6J("ngClass",e.VKq(13,f,r.passwordShow)),e.xp6(2),e.Q6J("ngClass",e.VKq(15,f,!r.passwordShow)),e.xp6(2),e.Q6J("ngIf",r.f.password.errors&&(r.f.password.value.length||r.f.password.touched)),e.xp6(7),e.Q6J("ngClass",e.VKq(17,f,r.rePasswordShow)),e.xp6(2),e.Q6J("ngClass",e.VKq(19,f,!r.rePasswordShow)),e.xp6(2),e.Q6J("ngIf",r.f.rePassword.errors&&(r.f.rePassword.value.length||r.f.rePassword.touched)),e.xp6(5),e.Q6J("ngIf",r.f.phone.errors&&(r.f.phone.value.length||r.f.phone.touched)),e.xp6(1),e.Q6J("ngIf",!r.isLoading),e.xp6(1),e.Q6J("ngIf",r.isLoading),e.xp6(1),e.Q6J("ngIf",r.errMsg))},dependencies:[m.ez,m.mk,m.O5,s.UX,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u]})}return t})()}}]);